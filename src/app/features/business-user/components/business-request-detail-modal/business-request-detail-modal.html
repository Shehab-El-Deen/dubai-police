<div class="modal-overlay" [class.open]="isOpen" (click)="closeModal()">
  <div class="modal-panel" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="modal-header">
      <button class="close-btn" (click)="closeModal()">
        <img src="svgs/back.svg" width="18" height="18" alt="back" />
      </button>
      <button class="expand-btn" (click)="onExpandClick()">
        <img src="svgs/expand.svg" width="18" height="18" alt="expand" />
      </button>
    </div>

    <!-- Modal Content -->
    @if (selectedRequest) {
      <div class="modal-content">
        <!-- Title Section with Grade -->
        <div class="title-section">
          <div>
            <h2 class="modal-title">{{ selectedRequest.name }}</h2>
            <p class="request-id">Request ID: {{ selectedRequest.id }}</p>
            <div class="section">
              <img src="svgs/attachment.svg" width="12" height="12" alt="attachment" />
              <label class="section-label">Dashboard URL:</label>
              <a href="https://www.dashboard.com/" class="dashboard-link" target="_blank">
                https://www.dashboard.com/
              </a>
            </div>
          </div>
          <div
            class="grade"
            *ngIf="selectedRequest"
            [ngStyle]="{
              backgroundColor: getStatusColor(selectedRequest.status) + '33',
            }"
          >
            <div class="grade-value">30%</div>
            <div class="grade-label">QA Score</div>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Status and Priority Row -->
        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Status</label>
          <span
              class="status-badge"
              [style.background-color]="getStatusBgColor(selectedRequest.status)"
              [style.color]="getStatusColor(selectedRequest.status)"
            >
              <span
                class="svg-icon status-dot"
                [style.background-color]="getStatusColor(selectedRequest.status)"
              ></span>
              {{ selectedRequest.status }}
            </span>
          </div>
        </div>

        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Submitted By</label>
            <p class="info-value">Hassan Elrashidy</p>
          </div>
        </div>

        <!-- Type -->
        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Type</label>
            <p class="info-value">{{ selectedRequest.type }}</p>
          </div>
        </div>

        <!-- Business Owner -->
        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Business Owner</label>
            <p class="info-value">{{ selectedRequest.owner }}</p>
          </div>
        </div>

        <!-- Submission Date -->
        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Submission Date</label>
            <p class="info-value">{{ selectedRequest.date }}</p>
          </div>
        </div>

        <div class="divider"></div>

        <div class="qc-grading-grid">
          <!-- Left Column -->
          <div class="qc-criterion-card">
            <div class="criterion-header">
              <div class="criterion-info">
                <img src="svgs/check-fill.svg" width="20" height="20" alt="check-fill" />

                <div class="criterion-text">
                  <div class="criterion-name">Graphical Representation</div>
                  <div class="criterion-description">
                    Visual Design must follow the established guidelines
                  </div>
                </div>
              </div>
              <div class="vertical-divider"></div>

              <div class="evaluation-box">
                <div class="evaluation-label">Evaluation</div>
                <div class="evaluation-score">10 out of 10</div>
              </div>
            </div>
          </div>

          <div class="qc-criterion-card">
            <div class="criterion-header">
              <div class="criterion-info">
                <img src="svgs/check-fill.svg" width="20" height="20" alt="check-fill" />

                <div class="criterion-text">
                  <div class="criterion-name">Branding Standards</div>
                  <div class="criterion-description">
                    Visual Design must follow the established guidelines
                  </div>
                </div>
              </div>
              <div class="vertical-divider"></div>

              <div class="evaluation-box">
                <div class="evaluation-label">Evaluation</div>
                <div class="evaluation-score">9 out of 10</div>
              </div>
            </div>
          </div>

          <div class="qc-criterion-card">
            <div class="criterion-header">
              <div class="criterion-info">
                <img src="svgs/check-fill.svg" width="20" height="20" alt="check-fill" />

                <div class="criterion-text">
                  <div class="criterion-name">Font Sizing Guidelines</div>
                  <div class="criterion-description">
                    Visual Design must follow the established guidelines
                  </div>
                </div>
              </div>
              <div class="vertical-divider"></div>

              <div class="evaluation-box">
                <div class="evaluation-label">Evaluation</div>
                <div class="evaluation-score">8 out of 10</div>
              </div>
            </div>
          </div>

          <div class="qc-criterion-card">
            <div class="criterion-header">
              <div class="criterion-info">
                <img src="svgs/check-fill.svg" width="20" height="20" alt="check-fill" />

                <div class="criterion-text">
                  <div class="criterion-name">Color Application</div>
                  <div class="criterion-description">
                    Visual Design must follow the established guidelines
                  </div>
                </div>
              </div>
              <div class="vertical-divider"></div>

              <div class="evaluation-box">
                <div class="evaluation-label">Evaluation</div>
                <div class="evaluation-score">8 out of 10</div>
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="qc-criterion-card">
            <div class="criterion-header">
              <div class="criterion-info">
                <img src="svgs/check-fill.svg" width="20" height="20" alt="check-fill" />

                <div class="criterion-text">
                  <div class="criterion-name">Labeling Data</div>
                  <div class="criterion-description">
                    Visual Design must follow the established guidelines
                  </div>
                </div>
              </div>
              <div class="vertical-divider"></div>

              <div class="evaluation-box">
                <div class="evaluation-label">Evaluation</div>
                <div class="evaluation-score">8 out of 10</div>
              </div>
            </div>
          </div>

          <div class="qc-criterion-card">
            <div class="criterion-header">
              <div class="criterion-info">
                <img src="svgs/check-fill.svg" width="20" height="20" alt="check-fill" />

                <div class="criterion-text">
                  <div class="criterion-name">Accurate Data Customization</div>
                  <div class="criterion-description">
                    Visual Design must follow the established guidelines
                  </div>
                </div>
              </div>
              <div class="vertical-divider"></div>

              <div class="evaluation-box">
                <div class="evaluation-label">Evaluation</div>
                <div class="evaluation-score">10 out of 10</div>
              </div>
            </div>
          </div>

          <div class="qc-criterion-card">
            <div class="criterion-header">
              <div class="criterion-info">
                <img src="svgs/check-fill.svg" width="20" height="20" alt="check-fill" />

                <div class="criterion-text">
                  <div class="criterion-name">Graphical Representation</div>
                  <div class="criterion-description">
                    Visual Design must follow the established guidelines
                  </div>
                </div>
              </div>
              <div class="vertical-divider"></div>

              <div class="evaluation-box">
                <div class="evaluation-label">Evaluation</div>
                <div class="evaluation-score">10 out of 10</div>
              </div>
            </div>
          </div>

          <div class="qc-criterion-card">
            <div class="criterion-header">
              <div class="criterion-info">
                <img src="svgs/check-fill.svg" width="20" height="20" alt="check-fill" />

                <div class="criterion-text">
                  <div class="criterion-name">Avoid Using Tables for Details</div>
                  <div class="criterion-description">
                    Visual Design must follow the established guidelines
                  </div>
                </div>
              </div>

              <div class="vertical-divider"></div>

              <div class="evaluation-box">
                <div class="evaluation-label">Evaluation</div>
                <div class="evaluation-score">10 out of 10</div>
              </div>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Feedback/Reason Section (Only for Rejected status) -->
        <div class="section" *ngIf="selectedRequest.status === 'Rejected'">
          <p class="section-content feedback-content">
            <label class="section-label">Feedback /Reason</label>
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum
            has been the industry's standard dummy text ever since the 1500s, when an unknown
            printer took a galley of type and scrambled it to make a type specimen book
            <br />
            <span class="section-reviewer">Reviewed by: Zeyad</span>
          </p>
        </div>
      </div>
    }
  </div>
</div>
