<div class="details-page-wrapper" *ngIf="selectedRequest">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="header-top">
      <h1 class="dashboard-title">Request Details</h1>
      <span class="last-refresh">Last Refresh: Today, 09:45 AM</span>
    </div>
    <!-- <div class="breadcrumb">
      <span>Dashboard</span>
      <span class="breadcrumb-icon">â€º</span>

      <span class="breadcrumb-active">Home</span>
    </div> -->
  </div>
  <div class="details-container">
    <!-- Title Section -->
    <div class="title-section">
      <h2 class="modal-title">{{ selectedRequest.name }}</h2>
      <p class="request-id">Request ID: {{ selectedRequest.id }}</p>
    </div>

    <!-- Main Content Grid -->
    <div class="details-grid">
      <!-- Left Column - Overview -->
      <div class="overview-card">
        <div class="card-header">
          <h3 class="card-title">Overview</h3>
        </div>

        <div class="dashboard-url-section">
          <div class="dashboard-title">
            <img src="svgs/attachment.svg" width="12" height="12" alt="attachment" />

            <span class="url-label">Dashboard URL</span>
          </div>
          <a href="https://www.dashboard.com/" class="dashboard-link" target="_blank">
            https://www.dashboard.com/
          </a>
        </div>

        <div class="qa-score-container">
          <div class="score-circle">
            <svg class="score-ring" width="140" height="140" viewBox="0 0 140 140">
              <circle
                class="score-ring-background"
                cx="70"
                cy="70"
                r="60"
                fill="none"
                stroke="#e8f5f1"
                stroke-width="12"
              />
              <circle
                class="score-ring-progress"
                cx="70"
                cy="70"
                r="60"
                fill="none"
                stroke="#1E7A60"
                stroke-width="12"
                stroke-linecap="round"
                [style.stroke-dasharray]="377"
                [style.stroke-dashoffset]="377 - (377 * 80) / 100"
                transform="rotate(-90 70 70)"
              />
            </svg>
            <div class="score-text">
              <span class="score-value">80%</span>
            </div>
          </div>
          <p class="score-label">QA Score</p>
        </div>

        <div class="overview-details">
          <div class="detail-row">
            <span class="detail-label">Department</span>
            <span class="detail-value">{{ selectedRequest.owner || 'Traffic Dept' }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Submission Date</span>
            <span class="detail-value">{{ selectedRequest.date }}</span>
          </div>
        </div>
      </div>

      <!-- Right Column - Grading -->
      <div class="grading-card">
        <div class="card-header">
          <h3 class="card-title">Grading</h3>
          <p class="card-subtitle">Enter scores for each category</p>
        </div>

        <div class="grading-items">
          <div class="grading-item">
            <div class="grading-info">
              <h4 class="grading-title">Correct data customization</h4>
              <p class="grading-description">Visual Design adheres to the guidelines</p>
            </div>
            <div class="score-input-wrapper">
              <input
                type="number"
                class="score-input"
                min="0"
                max="10"
                [value]="scores.dataCustomization"
                (input)="validateScore($event, 'dataCustomization')"
              />
              <span class="score-max">/ 10</span>
            </div>
          </div>

          <div class="grading-item">
            <div class="grading-info">
              <h4 class="grading-title">Visual Representation</h4>
              <p class="grading-description">Visual Design adheres to the guidelines</p>
            </div>
            <div class="score-input-wrapper">
              <input
                type="number"
                class="score-input"
                min="0"
                max="10"
                [value]="scores.visualRepresentation1"
                (input)="validateScore($event, 'visualRepresentation1')"
              />

              <span class="score-max">/ 10</span>
            </div>
          </div>

          <div class="grading-item">
            <div class="grading-info">
              <h4 class="grading-title">Data Labeling</h4>
              <p class="grading-description">Visual Design adheres to the guidelines</p>
            </div>
            <div class="score-input-wrapper">
              <input
                type="number"
                class="score-input"
                min="0"
                max="10"
                [value]="scores.dataLabeling"
                (input)="validateScore($event, 'dataLabeling')"
              />

              <span class="score-max">/ 10</span>
            </div>
          </div>

          <div class="grading-item">
            <div class="grading-info">
              <h4 class="grading-title">Visual Representation</h4>
              <p class="grading-description">Visual Design adheres to the guidelines</p>
            </div>
            <div class="score-input-wrapper">
              <input
                type="number"
                class="score-input"
                min="0"
                max="10"
                [value]="scores.visualRepresentation2"
                (input)="validateScore($event, 'visualRepresentation2')"
              />

              <span class="score-max">/ 10</span>
            </div>
          </div>

          <div class="grading-item">
            <div class="grading-info">
              <h4 class="grading-title">Brand Guidelines</h4>
              <p class="grading-description">Visual Design adheres to the guidelines</p>
            </div>
            <div class="score-input-wrapper">
              <input
                type="number"
                class="score-input"
                min="0"
                max="10"
                [value]="scores.brandGuidelines"
                (input)="validateScore($event, 'brandGuidelines')"
              />

              <span class="score-max">/ 10</span>
            </div>
          </div>

          <div class="grading-item">
            <div class="grading-info">
              <h4 class="grading-title">Avoid Details using tables</h4>
              <p class="grading-description">Visual Design adheres to the guidelines</p>
            </div>
            <div class="score-input-wrapper">
              <input
                type="number"
                class="score-input"
                min="0"
                max="10"
                [value]="scores.avoidTables"
                (input)="validateScore($event, 'avoidTables')"
              />
              <span class="score-max">/ 10</span>
            </div>
          </div>
        </div>

        <div class="total-score">
          <span class="total-label">Total Score</span>
          <span class="total-value">90 <span class="total-max">/ 100</span></span>
        </div>
      </div>
    </div>

    <!-- Bottom Section -->
    <div class="bottom-section">
      <!-- Rejection Reason -->
      <div class="rejection-section">
        <label class="section-label">Rejection Reason</label>
        <div class="custom-select">
          <select class="rejection-select" (change)="onRejectionReasonChange()">
            <option value="">Traffic Accident Hotspots: Dashboard</option>
            <option value="quality">Quality Issues</option>
            <option value="incomplete">Incomplete Data</option>
            <option value="guidelines">Doesn't Follow Guidelines</option>
          </select>
          <img
            class="menu-arrow"
            src="svgs/arrow-up-simple.svg"
            width="12"
            height="12"
            class="select-arrow"
          />
        </div>
      </div>

      <!-- Comments Section -->
      <div class="comments-section">
        <label class="section-label">Comments/ Feedback</label>
        <div class="comment-input-wrapper">
          <textarea
            [(ngModel)]="comment"
            placeholder="Enter your comment..."
            class="comment-textarea"
            (input)="onCommentChange()"
          ></textarea>
          <div class="comment-toolbar">
            <button class="toolbar-btn" title="Text formatting">
              <img src="svgs/T-comment.svg" width="22" height="22" />
            </button>
            <button class="toolbar-btn" title="Bold">
              <img src="svgs/doc-comment.svg" width="22" height="22" />
            </button>
            <button class="toolbar-btn" title="Emoji">
              <img src="svgs/happy_light.svg" width="22" height="22" />
            </button>
            <button class="toolbar-btn" title="Link">
              <img src="svgs/Img_load_box.svg" width="22" height="22" />
            </button>
            <button class="toolbar-btn" title="Attachment">
              <img src="svgs/paper_clip_light.svg" width="22" height="22" />
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="btn-reject" (click)="openRejectModal()">
                                                                 <img src="svgs/Vector.svg" width="12" height="12"/>

        Reject
      </button>
      <button class="btn-approve" (click)="openApproveModal()">
                                                               <img src="svgs/check-approve.svg" width="20" height="20"/>

        Approve
      </button>
    </div>
  </div>

  <app-approve-modal *ngIf="showApproveModal" (approve)="handleApprove()" (cancel)="handleCancel()">
  </app-approve-modal>

  <app-reject-modal
    *ngIf="showRejectModal"
    (reject)="handleReject($event)"
    (cancel)="handleCancel()"
  >
  </app-reject-modal>
</div>
