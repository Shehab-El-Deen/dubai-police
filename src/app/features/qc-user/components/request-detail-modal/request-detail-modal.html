<div class="modal-overlay" [class.open]="isOpen" (click)="closeModal()">
  <div class="modal-panel" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="modal-header">
      <button class="close-btn" (click)="closeModal()">
        <img src="svgs/back.svg" width="18" height="18" alt="back" />
      </button>
      <button class="expand-btn" (click)="onExpandClick()">
        <img src="svgs/expand.svg" width="18" height="18" alt="expand" />
      </button>
    </div>

    <!-- Modal Content -->
    @if (selectedRequest) {
      <div class="modal-content">
        <!-- Title Section -->
        <div class="title-section">
          <h2 class="modal-title">{{ selectedRequest.name }}</h2>
          <p class="request-id">Request ID: {{ selectedRequest.id }}</p>
        </div>

        <div class="divider"></div>

        <!-- Status and Priority Row -->
        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Status</label>
                  <span
              class="status-badge"
              [style.background-color]="getStatusBgColor(selectedRequest.status)"
              [style.color]="getStatusColor(selectedRequest.status)"
            >
              <span
                class="svg-icon status-dot"
                [style.background-color]="getStatusColor(selectedRequest.status)"
              ></span>
              {{ selectedRequest.status }}
            </span>
          </div>
        </div>

        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Priority</label>
            <span class="priority-badge">
              <span
                class="svg-icon priority-icon"
                [style.background-color]="getPriorityColor(selectedRequest.priority)"
              ></span>
            </span>
          </div>
        </div>

        <!-- Type -->
        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Type</label>
            <p class="info-value">{{ selectedRequest.type }}</p>
          </div>
        </div>

        <!-- Business Owner -->
        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Business Owner</label>
            <p class="info-value">{{ selectedRequest.owner }}</p>
          </div>
        </div>

        <!-- Submission Date -->
        <div class="info-row">
          <div class="info-column">
            <label class="info-label">Submission Date</label>
            <p class="info-value">{{ selectedRequest.date }}</p>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Description -->
        <div class="section">
          <label class="section-label">Description</label>
          <p class="section-content">
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum
            has been the industry's standard dummy text ever since the 1500s, when an unknown
            printer took a galley of type and scrambled it to make a type specimen book. It has
            survived not only five centuries, but also the leap into electronic typesetting,
            remaining essentially unchanged. It was popularised in the 1960s with the release of
            Letraset sheets containing Lorem Ipsum passages, and more recently with desktop
            publishing software like Aldus PageMaker including versions of Lorem Ipsum.
          </p>
        </div>

        <div class="divider"></div>

        <!-- Notes for QC -->
        <div class="section">
          <label class="section-label">Notes for QC</label>
          <p class="section-content">
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum
            has been the industry's standard dummy text ever since the 1500s, when an unknown
            printer took a galley of type and scrambled it to make a type specimen book
          </p>
        </div>

        <div class="divider"></div>

        <!-- Dashboard URL -->
        <div class="section">
          <label class="section-label">Dashboard URL</label>
          <a href="https://www.dashboard.com/" class="dashboard-link" target="_blank">
            https://www.dashboard.com/
          </a>
        </div>

        <div class="divider"></div>

        <!-- Comment Section -->
        <div class="section">
          <label class="section-label">Comment</label>
          <div class="comment-container">
            <textarea
              [(ngModel)]="comment"
              placeholder="Enter your comment..."
              class="comment-textarea"
            ></textarea>
             <div class="comment-toolbar">
            <button class="toolbar-btn" title="Text formatting">
              <img src="svgs/T-comment.svg" width="22" height="22" />
            </button>
            <button class="toolbar-btn" title="Bold">
              <img src="svgs/doc-comment.svg" width="22" height="22" />
            </button>
            <button class="toolbar-btn" title="Emoji">
              <img src="svgs/happy_light.svg" width="22" height="22" />
            </button>
            <button class="toolbar-btn" title="Link">
              <img src="svgs/Img_load_box.svg" width="22" height="22" />
            </button>
            <button class="toolbar-btn" title="Attachment">
              <img src="svgs/paper_clip_light.svg" width="22" height="22" />
            </button>
          </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn-reject" (click)="openRejectModal()">Reject</button>
          <button class="btn-approve" (click)="openApproveModal()">Approve</button>
        </div>
        <app-approve-modal
          *ngIf="showApproveModal"
          (approve)="handleApprove()"
          (cancel)="handleCancel()"
        >
        </app-approve-modal>

        <app-reject-modal
          *ngIf="showRejectModal"
          (reject)="handleReject($event)"
          (cancel)="handleCancel()"
        >
        </app-reject-modal>
      </div>
    }
  </div>
</div>
