<div class="dashboard-container">
  <!-- Sidebar -->
  <app-review-sidebar (menuItemSelected)="onMenuItemSelected($event)"></app-review-sidebar>
  <!-- Main Content -->
  @if (currentView === 'overview') {
    <div class="main-content">
      <!-- Header Section -->
      <div class="dashboard-header">
        <div class="header-top">
          <h1 class="dashboard-title">Home Dashboard</h1>
          <span class="last-refresh">Last Refresh: Today, {{ lastRefresh | date: 'short' }}</span>
        </div>
        <div class="breadcrumb">
          <span>Dashboard</span>
          <span class="breadcrumb-icon">â€º</span>
          <span class="breadcrumb-active">Overview</span>
        </div>
      </div>

      <!-- Stats Cards -->
      <app-stats-cards
        [highPriorityValue]="highPriorityCount"
        [needReviewValue]="needReviewCount"
        [topPriorityValue]="topPriorityCount"
      >
      </app-stats-cards>
      <div class="table-section">
        <!-- Search and Filter -->
        <div class="search-filter-section">
          <div class="search-box">
            <input
              type="text"
              placeholder="Search by id or Type"
              [(ngModel)]="searchQuery"
              (input)="onSearch(searchQuery)"
              class="search-input"
            />
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              class="search-icon"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M13.3891 13.3891L19 19M9.5 15C12.5376 15 15 12.5376 15 9.5C15 6.46243 12.5376 4 9.5 4C6.46243 4 4 6.46243 4 9.5C4 12.5376 6.46243 15 9.5 15Z"
                stroke="#454545"
                stroke-width="1.4"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </div>
          <button class="filter-button">
            Filter
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4.00024 7H20.0002M7.00018 12H17.0002M11.0002 17H13.0002"
                stroke="#454545"
                stroke-width="1.4"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>

        <!-- Tabs -->
        <app-tab-navigation
          [tabs]="['All Requests', 'Need Review', 'Approved', 'Rejected', 'Validation Failed']"
          (tabChanged)="onTabChange($event)"
        >
        </app-tab-navigation>

        <!-- Request Table -->
        <app-request-table
          [requests]="displayedRequests"
          [currentPage]="currentPage"
          [totalPages]="totalPages"
          [totalItems]="filteredRequests.length"
          [itemsPerPage]="pageSize"
          (nextPage)="nextPage()"
          (prevPage)="prevPage()"
          (rowClick)="onRowClick($event)"
          (viewRequest)="onViewRequest($event)"
        >
        </app-request-table>
      </div>
    </div>
  }

  <!-- Request Detail Modal -->
  <app-request-detail-modal (expandModal)="onModalExpand()"></app-request-detail-modal>

  <!-- Requests Page -->
  @if (
    currentView === 'need-review' ||
    currentView === 'approved' ||
    currentView === 'rejected' ||
    currentView === 'validation-failed' ||
    currentView === 'under-review'
  ) {
    <app-requests-page [selectedTab]="currentView"></app-requests-page>
  }

  <!-- Request Details Page -->
  @if (currentView === 'details' && selectedRequest) {
    <app-request-details-page
      [selectedRequest]="selectedRequest"
      [onClose]="closeDetailsPage"
    ></app-request-details-page>
  }
</div>
